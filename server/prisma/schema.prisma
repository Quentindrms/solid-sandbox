generator client {
  provider   = "prisma-client"
  output     = "../generated"
  engineType = "client"
}

datasource db {
  provider = "postgresql"
}

model articles {
  article_id        Int                @id @default(autoincrement())
  titre             String             @db.VarChar(255)
  description       String?
  prix              Decimal            @db.Decimal(10, 2)
  quantite_en_stock Int?               @default(0)
  date_creation     DateTime?          @default(now()) @db.Timestamp(6)
  categorie_id      Int?
  utilisateur_id    Int?
  categories        categories?        @relation(fields: [categorie_id], references: [categorie_id], onDelete: NoAction, onUpdate: NoAction)
  utilisateurs      utilisateurs?      @relation(fields: [utilisateur_id], references: [utilisateur_id], onDelete: NoAction, onUpdate: NoAction)
  commentaires      commentaires[]
  details_commande  details_commande[]

  @@index([categorie_id], map: "idx_articles_categorie")
}

model categories {
  categorie_id  Int        @id @default(autoincrement())
  nom_categorie String     @unique @db.VarChar(100)
  description   String?
  articles      articles[]
}

model commandes {
  commande_id      Int                @id @default(autoincrement())
  utilisateur_id   Int?
  date_commande    DateTime?          @default(now()) @db.Timestamp(6)
  statut           String?            @default("en attente") @db.VarChar(50)
  montant_total    Decimal            @db.Decimal(10, 2)
  utilisateurs     utilisateurs?      @relation(fields: [utilisateur_id], references: [utilisateur_id], onDelete: NoAction, onUpdate: NoAction)
  details_commande details_commande[]

  @@index([utilisateur_id], map: "idx_commandes_utilisateur")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model commentaires {
  commentaire_id Int           @id @default(autoincrement())
  article_id     Int?
  utilisateur_id Int?
  contenu        String
  note           Int?
  date_creation  DateTime?     @default(now()) @db.Timestamp(6)
  articles       articles?     @relation(fields: [article_id], references: [article_id], onDelete: NoAction, onUpdate: NoAction)
  utilisateurs   utilisateurs? @relation(fields: [utilisateur_id], references: [utilisateur_id], onDelete: NoAction, onUpdate: NoAction)

  @@index([article_id], map: "idx_commentaires_article")
}

model details_commande {
  detail_id     Int        @id @default(autoincrement())
  commande_id   Int?
  article_id    Int?
  quantite      Int
  prix_unitaire Decimal    @db.Decimal(10, 2)
  articles      articles?  @relation(fields: [article_id], references: [article_id], onDelete: NoAction, onUpdate: NoAction)
  commandes     commandes? @relation(fields: [commande_id], references: [commande_id], onDelete: NoAction, onUpdate: NoAction)
}

model roles {
  role_id      Int            @id @default(autoincrement())
  nom_role     String         @unique @db.VarChar(50)
  description  String?
  utilisateurs utilisateurs[]
}

model utilisateurs {
  utilisateur_id Int            @id @default(autoincrement())
  nom            String         @db.VarChar(100)
  prenom         String         @db.VarChar(100)
  email          String         @unique @db.VarChar(255)
  mot_de_passe   String         @db.VarChar(255)
  date_creation  DateTime?      @default(now()) @db.Timestamp(6)
  role_id        Int?
  est_actif      Boolean?       @default(true)
  articles       articles[]
  commandes      commandes[]
  commentaires   commentaires[]
  roles          roles?         @relation(fields: [role_id], references: [role_id], onDelete: NoAction, onUpdate: NoAction)
}
